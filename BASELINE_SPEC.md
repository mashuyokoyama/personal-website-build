# 基準仕様（ベースライン）

**この仕様は「崩さないこと」を最優先する。**  
現状の挙動・体験がベースライン。以後の修正は最小差分で行い、ここに書かれた内容を壊さないこと。

---

## 1) Gate（home）

| 条件 | 挙動 |
|------|------|
| **初回** | home（Gate）だけが表示され、クリックするまで本編は出ない |
| **再訪** | 最初から本編のみ表示され、home は一瞬も出ない |
| **共通** | BlankScreen のチラ見え・フラッシュが起きない（途中で状態が切り替わって見えるのは禁止） |

- Gate の表示／非表示の判定は **初期レンダリング前に確定**（`useState` の初期値で sessionStorage を読む）。
- **禁止**: ページ遷移／リロードで Gate を実装しない（`router.push` / `location.href` 禁止）。
- **禁止**: `useEffect` で後出し判定して画面が一瞬切り替わる状態を作らない。

---

## 2) 音（Children.wav）

- **起動トリガー**: home クリックが音の起動トリガー（ユーザー操作内で `play()` を呼ぶ）。
- **継続**: EN/JP 切替や画面の状態変化で音を止めない。
- **スコープ**: 音は言語より外側の「環境」なので、コンポーネントの再マウント等でリセットしない。
- **状態維持**: 明示的に `pause()` しない限り、再生状態と `currentTime` を維持する。

- **禁止**: `<audio>` や Audio を包むコンポーネントに `key` を付けて再生成しない。

---

## 3) レイアウト／表現の思想

- 規則はあるが **「気づかれない」** ことが重要。
- **フォント・レイヤー**: フォントは表現ではなく空間設計。詳細は **`FONT_AND_LAYER_SPEC.md`** を参照すること。
- **テキスト**: 左寄せ（読ませる）。
- **サムネ**: 右上固定で“気配”として存在（動かさない）。
- **中央**: 帯として目立たないよう、弱いグラデーションで気配を保つ。
- **JP/EN 切替**: 溶けるように（0.2 秒未満）変えるが、演出に見せない。

---

## 絶対にやらないこと（禁止）

- Gate の実装をページ遷移／リロードで行わない（`router.push` / `location.href` 禁止）。
- `useEffect` で後出し判定して画面が一瞬切り替わる状態を作らない。
- AudioPlayer に `key` を付けて再生成しない。
- レイアウトを大きく再設計する提案や、UI 感の強い装飾（カード/枠/強い hover 等）を勝手に入れない。
- “改善”の名目で本質的な仕様を変更しない。

---

## 今後の変更の進め方

- 変更は必ず **「最小差分」** で行う。
- 仕様を変える必要がある場合は、**実装前に理由と影響範囲を列挙して提案し、承認を取る**。
- まず **現状の基準仕様を維持したまま調整できる方法** を優先する。

---

*最終更新: 基準として固定*
